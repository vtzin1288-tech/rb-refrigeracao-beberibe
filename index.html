<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>RB Refrigeração Beberibe</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: Arial, sans-serif; background: #f0f2f5; margin:0; padding:0; }
header { background: #0b5ed7; color: white; padding: 20px; text-align:center; }
section { padding: 20px; }
.card { background: white; padding:20px; border-radius:8px; box-shadow:0 0 15px rgba(0,0,0,0.2); margin-bottom:20px; }
input, button, select { width:100%; padding:12px; margin-top:10px; font-size:16px; }
button { background:#0b5ed7; color:white; border:none; border-radius:5px; cursor:pointer; }
button:hover { opacity:0.9; }
table { width:100%; border-collapse: collapse; margin-top:10px; font-size:14px; }
th, td { border:1px solid #ccc; padding:8px; text-align:center; }
th { background:#0b5ed7; color:white; }
td.entrada { background: #d4edda; }
td.saida { background: #f8d7da; }
td.almoco { background: #fff3cd; }
td.horaExtra { background: #ffeeba; }
#verRegistrosBtn { float:right; margin-bottom:10px; width:auto; }
</style>
</head>
<body>

<header>
<h1>RB Refrigeração Beberibe</h1>
<p>Sistema de Controle de Horários</p>
</header>

<!-- LOGIN -->
<section id="loginCard" class="card">
<h3>Login</h3>
<input type="text" id="codigo" placeholder="Digite seu código (ex: RB01)">
<input type="text" id="nome" placeholder="Digite seu nome (opcional)">
<button onclick="login()">Entrar</button>
<p id="loginMsg" style="color:red;"></p>
</section>

<!-- ÁREA DO FUNCIONÁRIO -->
<section id="funcCard" class="card" style="display:none">
<h3>Bem-vindo <span id="funcNome"></span></h3>
<button id="verRegistrosBtn" onclick="mostrarTodosRegistros()">Ver Todos os Registros</button>
<table>
<thead>
<tr>
<th>Entrada</th>
<th>Saída Almoço</th>
<th>Retorno Almoço</th>
<th>Saída Trabalho</th>
<th>Horas Extras</th>
</tr>
</thead>
<tbody>
<tr>
<td><input type="time" id="entrada"></td>
<td><input type="time" id="saidaAlmoco"></td>
<td><input type="time" id="retornoAlmoco"></td>
<td><input type="time" id="saidaTrabalho"></td>
<td><input type="time" id="horasExtras"></td>
</tr>
</tbody>
</table>
<button onclick="salvarRegistro()">Salvar Registro</button>
<h4>Seus registros:</h4>
<div id="registrosFuncionario"></div>
</section>

<!-- ÁREA DO PATRÃO -->
<section id="bossCard" class="card" style="display:none">
<h3>Área do Patrão</h3>
<button onclick="mostrarTodosFuncionarios()">Ver Todos os Registros de Funcionários</button>
<div id="registrosTodos"></div>
</section>

<script>
// Códigos válidos
const codigosFuncionarios = [];
for(let i=1;i<=100;i++){ 
    codigosFuncionarios.push('RB'+(i<10?'0'+i:i)); 
}
const codigoPatrao = 'ADM01';

// Login
function login(){
    const codigo = document.getElementById('codigo').value.toUpperCase();
    const nome = document.getElementById('nome').value || '';
    const loginMsg = document.getElementById('loginMsg');

    if(codigosFuncionarios.includes(codigo)){
        document.getElementById('funcNome').innerText = nome || codigo;
        document.getElementById('loginCard').style.display = 'none';
        document.getElementById('funcCard').style.display = 'block';
        loginMsg.innerText = '';
    } else if(codigo === codigoPatrao){
        document.getElementById('loginCard').style.display = 'none';
        document.getElementById('bossCard').style.display = 'block';
        loginMsg.innerText = '';
    } else{
        loginMsg.innerText = 'Código inválido!';
    }
}

// Salvar registro do funcionário
function salvarRegistro(){
    const codigo = document.getElementById('codigo').value.toUpperCase();
    const registro = {
        data: new Date().toLocaleString(),
        entrada: document.getElementById('entrada').value,
        saidaAlmoco: document.getElementById('saidaAlmoco').value,
        retornoAlmoco: document.getElementById('retornoAlmoco').value,
        saidaTrabalho: document.getElementById('saidaTrabalho').value,
        horasExtras: document.getElementById('horasExtras').value
    };
    let registros = JSON.parse(localStorage.getItem(codigo)) || [];
    registros.push(registro);
    localStorage.setItem(codigo, JSON.stringify(registros));
    alert('Registro salvo com sucesso!');
    mostrarTodosRegistros();
}

// Mostrar registros do funcionário logado
function mostrarTodosRegistros(){
    const codigo = document.getElementById('codigo').value.toUpperCase();
    const registros = JSON.parse(localStorage.getItem(codigo)) || [];
    let html = '<table><tr><th>Data</th><th>Entrada</th><th>Saída Almoço</th><th>Retorno Almoço</th><th>Saída Trabalho</th><th>Horas Extras</th></tr>';
    registros.forEach(r=>{
        html += `<tr>
        <td>${r.data}</td>
        <td>${r.entrada}</td>
        <td>${r.saidaAlmoco}</td>
        <td>${r.retornoAlmoco}</td>
        <td>${r.saidaTrabalho}</td>
        <td>${r.horasExtras}</td>
        </tr>`;
    });
    html += '</table>';
    document.getElementById('registrosFuncionario').innerHTML = html;
}

// Mostrar todos os registros para o patrão
function mostrarTodosFuncionarios(){
    let html = '';
    codigosFuncionarios.forEach(codigo=>{
        const registros = JSON.parse(localStorage.getItem(codigo)) || [];
        if(registros.length > 0){
            html += `<h4>${codigo}</h4><table><tr><th>Data</th><th>Entrada</th><th>Saída Almoço</th><th>Retorno Almoço</th><th>Saída Trabalho</th><th>Horas Extras</th></tr>`;
            registros.forEach(r=>{
                html += `<tr>
                <td>${r.data}</td>
                <td>${r.entrada}</td>
                <td>${r.saidaAlmoco}</td>
                <td>${r.retornoAlmoco}</td>
                <td>${r.saidaTrabalho}</td>
                <td>${r.horasExtras}</td>
                </tr>`;
            });
            html += '</table>';
        }
    });
    document.getElementById('registrosTodos').innerHTML = html || 'Nenhum registro encontrado.';
}
</script>

</body>
  </html>
